#!/usr/bin/python

import sys
from socket import *
if len(sys.argv)<3:
	print sys.argv[0]+" host nombre_usuario [port| default 25]"
	print "host: Ip o dominio"
	print "nombre_usuario: usuario a verificar"
	print "port: puerto del servicio [default 25]"
	sys.exit(1)

if len(sys.argv)==4:
	port=sys.argv[3]
else:
	port=25

print sys.argv[1]
print port
s=socket(AF_INET,SOCK_STREAM)
s.connect((sys.argv[1],port))

print s.recv(1024)
s.send('VRFY '+sys.argv[2]+'\r\n')
print s.recv(1024)
if '252' in s.recv(1024):
	print "EXISTE"
else:
	print "NO EXISTE"
s.close()
